-- MySQL Script generated by MySQL Workbench
-- 2015年03月03日 星期二 11时37分26秒
-- Model: New Model    Version: 1.0
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema taoljie
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `taoljie` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `taoljie` ;

-- -----------------------------------------------------
-- Table `taoljie`.`role`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `taoljie`.`role` (
  `rid` INT NOT NULL AUTO_INCREMENT,
  `rolename` VARCHAR(45) NULL,
  `memo` TEXT NULL,
  PRIMARY KEY (`rid`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `taoljie`.`college`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `taoljie`.`college` (
  `id` INT NOT NULL,
  `short_name` VARCHAR(20) NULL,
  `full_name` VARCHAR(128) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `taoljie`.`member`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `taoljie`.`member` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NULL,
  `name` VARCHAR(45) NULL,
  `studentid` VARCHAR(45) NULL,
  `gender` VARCHAR(45) NULL,
  `college_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_User_College1_idx` (`college_id` ASC),
  CONSTRAINT `fk_User_College1`
    FOREIGN KEY (`college_id`)
    REFERENCES `taoljie`.`college` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `taoljie`.`post`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `taoljie`.`post` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NULL,
  `passtime` DATE NULL,
  `classify` VARCHAR(45) NULL,
  `time` DATE NULL,
  `location` VARCHAR(45) NULL,
  `wage` INT NULL,
  ` settlement` VARCHAR(45) NULL,
  `content` TEXT NULL,
  `contacts` VARCHAR(45) NULL,
  `phone` VARCHAR(45) NULL,
  `morecontent` TEXT NULL,
  `introduce` TEXT NULL,
  `likes` INT NULL DEFAULT 0 COMMENT '顶',
  `dislikes` INT NULL DEFAULT 0 COMMENT '踩',
  `member_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_post_member1_idx` (`member_id` ASC),
  CONSTRAINT `fk_post_member1`
    FOREIGN KEY (`member_id`)
    REFERENCES `taoljie`.`member` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = '二手信息';


-- -----------------------------------------------------
-- Table `taoljie`.`resume`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `taoljie`.`resume` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `gender` VARCHAR(10) NULL,
  `age` INT NULL,
  `taller` VARCHAR(45) NULL,
  `phone` VARCHAR(256) NULL,
  `email` VARCHAR(45) NULL,
  `qq` VARCHAR(45) NULL,
  `experience` TEXT NULL,
  `introduce` TEXT NULL,
  `member_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Resume_User1_idx` (`member_id` ASC),
  CONSTRAINT `fk_Resume_User1`
    FOREIGN KEY (`member_id`)
    REFERENCES `taoljie`.`member` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `taoljie`.`review`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `taoljie`.`review` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `content` TEXT NULL,
  `post_id` INT NULL,
  `member_id` INT NULL,
  `time` DATE NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Review_Info1_idx` (`post_id` ASC),
  INDEX `fk_Review_User1_idx` (`member_id` ASC),
  CONSTRAINT `fk_Review_Info1`
    FOREIGN KEY (`post_id`)
    REFERENCES `taoljie`.`post` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Review_User1`
    FOREIGN KEY (`member_id`)
    REFERENCES `taoljie`.`member` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `taoljie`.`member_role`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `taoljie`.`member_role` (
  `member_id` INT NOT NULL,
  `role_id` INT NOT NULL,
  INDEX `fk_User_has_Role_Role1_idx` (`role_id` ASC),
  INDEX `fk_User_has_Role_User1_idx` (`member_id` ASC),
  CONSTRAINT `fk_User_has_Role_User1`
    FOREIGN KEY (`member_id`)
    REFERENCES `taoljie`.`member` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_User_has_Role_Role1`
    FOREIGN KEY (`role_id`)
    REFERENCES `taoljie`.`role` (`rid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `taoljie`.`school`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `taoljie`.`school` (
  `id` INT NOT NULL,
  `short_name` VARCHAR(20) NULL,
  `full_name` VARCHAR(128) NULL,
  `college_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_School_College1_idx` (`college_id` ASC),
  CONSTRAINT `fk_School_College1`
    FOREIGN KEY (`college_id`)
    REFERENCES `taoljie`.`college` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = '学院';


-- -----------------------------------------------------
-- Table `taoljie`.`banner_pic`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `taoljie`.`banner_pic` (
  `id` INT NOT NULL,
  `picture_path` VARCHAR(45) NULL,
  `time` DATE NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
